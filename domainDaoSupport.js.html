<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width" charset="utf-8">
    <title>bearcat-dao</title>
    <link rel="stylesheet" href="stylesheets/bootstrap.css">
    <link rel="stylesheet" href="stylesheets/bootstrap-responsive.css">
    <link rel="stylesheet" href="stylesheets/docs.css">
    <style>
      body > .navbar .brand {
        float:left;
        text-shadow: rgba(255, 255, 255, 0.0980392) 0px 1px 0px, rgba(255, 255, 255, 0.4) 0px 0px 30px;
        color: white;
        margin-left:0px;
        font-weight:normal;
      }
      
      .bs-docs-sidenav.affix {
        box-shadow: 0 0 20px 1px rgba(0, 0, 0, 0.5);
        z-index: 10;
      }
      
      .bs-docs-sidenav i{
        width: 8px;
        height: 8px;
        padding: 0px;
        margin: 0px;
        display: inline-block;
        margin-right:0.5em;
      }
      
      .bs-docs-sidenav > li > a {
          word-wrap: break-word;
      }
      
      .bs-docs-sidenav > li:first-child > a {
        border-top-right-radius: 6px;
        border-top-left-radius: 6px;
      }
      
      code[class*="language-"],pre[class*="language-"]{color:black;text-shadow:0 1px white;font-family:Consolas,Monaco,'Andale Mono',monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*="language-"]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*="language-"],pre[class*="language-"]{background:#f5f2f0}:not(pre)>code[class*="language-"]{padding:.1em;border-radius:.3em}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:slategray}.token.punctuation{color:#999}.namespace{opacity:.7}.token.property,.token.tag,.token.boolean,.token.number{color:#905}.token.selector,.token.attr-name,.token.string{color:#690}.token.operator,.token.entity,.token.url,.language-css .token.string,.style .token.string{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.regex,.token.important{color:#e90}.token.important{font-weight:bold}.token.entity{cursor:help}
      div.description {margin: 14px 0; padding-top: 14px; border-bottom:1px solid #eee; }
      .tags {}
      .ctx-type {
        display:inline-block;
        margin-right:0.5em;
        //- float:right; margin-top:8px
      }
      
      footer iframe{vertical-align:middle;}
      
    </style>
  </head>
  <body data-spy="scroll" data-target=".scrollspy">
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container"><a class="brand"></a>
          <div class="nav-collapse collapse">
            <ul class="nav pull-right sponsored"></ul>
          </div>
        </div>
      </div>
    </div>
    <header id="overview" class="jumbotron subhead">
      <div class="container">
        <h1>bearcat-dao</h1>
        <p class="lead"></p>
      </div>
    </header>
    <div class="container">
      <div class="row">
        <div class="span3 bs-docs-sidebar">
          <ul class="nav nav-list bs-docs-sidenav affix-top">
            <!--li><a href="../index.html">Main</a></li>
            <li><a href="../aspect/cacheAspect.js.html">aspect/cacheAspect.js</a></li>
            <li><a href="../aspect/transactionAspect.js.html">aspect/transactionAspect.js</a></li>
            <li><a href="../connection/cache/redisConnection.js.html">connection/cache/redisConnection.js</a></li>
            <li><a href="../connection/cache/redisConnectionManager.js.html">connection/cache/redisConnectionManager.js</a></li>
            <li><a href="../connection/sql/mysqlConnectionManager.js.html">connection/sql/mysqlConnectionManager.js</a></li>
            <li class="active"><a href="../core/domainDaoSupport.js.html">core/domainDaoSupport.js</a></li>
            <li><a href="../core/sqlDaoSupport.js.html">core/sqlDaoSupport.js</a></li>
            <li><a href="../support/fieldConfig.js.html">support/fieldConfig.js</a></li>
            <li><a href="../support/tableConfig.js.html">support/tableConfig.js</a></li>
            <li><a href="../template/cache/redisTemplate.js.html">template/cache/redisTemplate.js</a></li>
            <li><a href="../template/sql/mysqlTemplate.js.html">template/sql/mysqlTemplate.js</a></li>
            <li><a href="../transaction/cacheTransactionManager.js.html">transaction/cacheTransactionManager.js</a></li>
            <li><a href="../transaction/dbTransactionManager.js.html">transaction/dbTransactionManager.js</a></li>
            <li><a href="../transaction/transactionStatus.js.html">transaction/transactionStatus.js</a></li>
            <li><a href="../util/beanBuilderUtil.js.html">util/beanBuilderUtil.js</a></li>
            <li><a href="../util/cacheKeyBuilderUtil.js.html">util/cacheKeyBuilderUtil.js</a></li>
            <li><a href="../util/constant.js.html">util/constant.js</a></li>
            <li><a href="../util/countDownLatch.js.html">util/countDownLatch.js</a></li>
            <li><a href="../util/domainFactory.js.html">util/domainFactory.js</a></li>
            <li><a href="../util/fieldUtil.js.html">util/fieldUtil.js</a></li>
            <li><a href="../util/sqlBuilderUtil.js.html">util/sqlBuilderUtil.js</a></li>
            <li><a href="../util/utils.js.html">util/utils.js</a></li-->
          </ul>
          <div class="scrollspy">
            <ul class="nav nav-list bs-docs-sidenav affix-top">
              <li><a href="#DomainDaoSupport"><i class="alert alert-info"></i><span>DomainDaoSupport</span></a>
              </li>
              <li><a href="#initConfig"><i class="alert alert-info"></i><span>initConfig</span></a>
              </li>
              <li><a href="#getConfig"><i class="alert alert-info"></i><span>getConfig</span></a>
              </li>
              <li><a href="#transaction"><i class="alert alert-info"></i><span>transaction</span></a>
              </li>
              <li><a href="#deleteById"><i class="alert alert-info"></i><span>deleteById</span></a>
              </li>
              <li><a href="#deleteByPrimaryKey"><i class="alert alert-info"></i><span>deleteByPrimaryKey</span></a>
              </li>
              <li><a href="#batchAdd"><i class="alert alert-info"></i><span>batchAdd</span></a>
              </li>
              <li><a href="#batchUpdate"><i class="alert alert-info"></i><span>batchUpdate</span></a>
              </li>
              <li><a href="#batchDelete"><i class="alert alert-info"></i><span>batchDelete</span></a>
              </li>
              <li><a href="#updateColumn"><i class="alert alert-info"></i><span>updateColumn</span></a>
              </li>
              <li><a href="#updateColumnValue"><i class="alert alert-info"></i><span>updateColumnValue</span></a>
              </li>
              <li><a href="#getList"><i class="alert alert-info"></i><span>getList</span></a>
              </li>
              <li><a href="#getByPrimary"><i class="alert alert-info"></i><span>getByPrimary</span></a>
              </li>
              <li><a href="#getById"><i class="alert alert-info"></i><span>getById</span></a>
              </li>
              <li><a href="#get"><i class="alert alert-info"></i><span>get</span></a>
              </li>
              <li><a href="#getCount"><i class="alert alert-info"></i><span>getCount</span></a>
              </li>
              <li><a href="#add"><i class="alert alert-info"></i><span>add</span></a>
              </li>
              <li><a href="#delete"><i class="alert alert-info"></i><span>delete</span></a>
              </li>
              <li><a href="#update"><i class="alert alert-info"></i><span>update</span></a>
              </li>
              <li><a href="#exists"><i class="alert alert-info"></i><span>exists</span></a>
              </li>
              <li><a href="#allocateRecordId"><i class="alert alert-info"></i><span>allocateRecordId</span></a>
              </li>
              <li><a href="#getByWhere"><i class="alert alert-info"></i><span>getByWhere</span></a>
              </li>
              <li><a href="#getListByWhere"><i class="alert alert-info"></i><span>getListByWhere</span></a>
              </li>
              <li><a href="#getCountByWhere"><i class="alert alert-info"></i><span>getCountByWhere</span></a>
              </li>
              <li><a href="#removeByWhere"><i class="alert alert-info"></i><span>removeByWhere</span></a>
              </li>
              <li><a href="#addToCache"><i class="alert alert-info"></i><span>addToCache</span></a>
              </li>
              <li><a href="#getStringFromCache"><i class="alert alert-info"></i><span>getStringFromCache</span></a>
              </li>
              <li><a href="#setCounter"><i class="alert alert-info"></i><span>setCounter</span></a>
              </li>
              <li><a href="#getCounter"><i class="alert alert-info"></i><span>getCounter</span></a>
              </li>
              <li><a href="#incr"><i class="alert alert-info"></i><span>incr</span></a>
              </li>
              <li><a href="#incrBy"><i class="alert alert-info"></i><span>incrBy</span></a>
              </li>
              <li><a href="#removeFromCache"><i class="alert alert-info"></i><span>removeFromCache</span></a>
              </li>
            </ul>
          </div>
        </div>
        <div class="span9">
          <section id="DomainDaoSupport">
            <h1>DomainDaoSupport</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">function</div><span>DomainDaoSupport()</span>
            </p>
          </section>
          <div class="description"><p>DomainDaoSupport constructor function.</p> </div>
          <pre><code class="language-javascript">var DomainDaoSupport = function() {
  this.tableConfig = null;
  this.sqlTemplate = null;
  this.cacheTemplate = null;
  this.domainMap = {};
}

module.exports = DomainDaoSupport;</code></pre>
          <section id="initConfig">
            <h1>initConfig</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.initConfig()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>domainConfig</td>
                <td>Object</td>
                <td>domain O/R mapping configuration</td>
              </tr>
              <tr>
                <td>domainConfig.func</td>
                <td>Function</td>
                <td>domain constructor function</td>
              </tr>
              <tr>
                <td>domainConfig.tableName</td>
                <td>String</td>
                <td>O/R mapping tableName</td>
              </tr>
              <tr>
                <td>domainConfig.primary</td>
                <td>Array</td>
                <td>primary fields array</td>
              </tr>
              <tr>
                <td>domainConfig.fields</td>
                <td>Array</td>
                <td>normal fields array</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport domain O/R mapping configuration.<br />init domainDaoSupport with domainConfig to set up O/R mapping</p>

<p>用domainConfig来初始化domainDaoSupport来设置O/R mapping</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.initConfig = function(domainConfig) {
  var func = domainConfig.func;
  var tableName = domainConfig.tableName;
  var primaryFields = domainConfig.primary || [];
  var fields = domainConfig.fields || [];
  if (!Utils.checkFunction(func)) {
    logger.error('domain object have no OR mapping info ' + domainConfig);
    return;
  }
  if (!tableName) {
    logger.error('domain object OR mapping info have no tableName ' + domainConfig);
    return;
  }

  var tableConfig = new TableConfig();
  tableConfig.setFunc(func);
  tableConfig.setTableName(tableName);
  tableConfig.setNormalFields(FieldUtil.buildFieldConfig(fields));
  tableConfig.setPrimaryFields(FieldUtil.buildFieldConfig(primaryFields));
  this.setTableConfig(tableConfig);
}</code></pre>
          <section id="getConfig">
            <h1>getConfig</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.getConfig()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>domainConfig</td>
                <td>Object</td>
                <td>domain O/R mapping configuration</td>
              </tr>
              <tr>
                <td>domainConfig.func</td>
                <td>Function</td>
                <td>domain constructor function</td>
              </tr>
              <tr>
                <td>domainConfig.key</td>
                <td>String</td>
                <td>domain cache key</td>
              </tr>
              <tr>
                <td>domainConfig.primary</td>
                <td>Array</td>
                <td>primary fields array</td>
              </tr>
              <tr>
                <td>domainConfig.fields</td>
                <td>Array</td>
                <td>normal fields array</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport get domain O/R mapping configuration.<br />get domainConfig when doing multi table query</p>

<p>多表查询的时候获取domainConfig</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.getConfig = function(domainConfig) {
  var func = domainConfig.func;
  var key = domainConfig.key;
  var primaryFields = domainConfig.primary || [];
  var fields = domainConfig.fields || [];
  if (!Utils.checkFunction(func)) {
    logger.error('domain object have no OR mapping info ' + domainConfig);
    return;
  }

  if (key) {
    var domain = this.getDomainMap(key);
    if (domain) {
      return domain;
    }
  }

  var tableConfig = new TableConfig();
  tableConfig.setFunc(func);
  tableConfig.setNormalFields(FieldUtil.buildFieldConfig(fields));
  tableConfig.setPrimaryFields(FieldUtil.buildFieldConfig(primaryFields));

  if (key) {
    this.setDomainMap(key, tableConfig);
  }

  return tableConfig;
}</code></pre>
          <section id="transaction">
            <h1>transaction</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.transaction()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>transactionStatus</td>
                <td>Object</td>
                <td></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport do transaction with transactionStatus.<br />transaction should be in transaction context to hold the same connection.<br />dao should implement this method to keep the transaction context.</p>

<p>事务需要在同一个connection中完成,这点由transactionStatus来保证<br />dao 需要实现 transaction 方法，来把transactionStatus表示的事务状态传给底层的sqlTemplate</p>

<pre><code class="language-javascript">
SimpleDao.prototype.transaction = function(txStatus) {
    this.domainDaoSupport.transaction(txStatus);
    return this;
}
</code></pre> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.transaction = function(transactionStatus) {
  return this.getSqlTemplate().transaction(transactionStatus);
}</code></pre>
          <section id="deleteById">
            <h1>deleteById</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.deleteById()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>id</td>
                <td>Long</td>
                <td></td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport deleteById field id.<br />id must be the unique primary key </p>

<p>id 必须是唯一主键</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.deleteById = function(id, cb) {
  var params = [id];

  return this.deleteByPrimaryKey(params, cb);
}</code></pre>
          <section id="deleteByPrimaryKey">
            <h1>deleteByPrimaryKey</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.deleteByPrimaryKey()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>params</td>
                <td>Array</td>
                <td>primay fields array</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport deleteByPrimaryKey.<br />params fields must be corresponded to what your domain defines primary fields</p>

<p>params 参数的顺序必须和domain里面主键定义的顺序相对应</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.deleteByPrimaryKey = function(params, cb) {
  var tableConfig = this.getTableConfig();
  var primaryFields = tableConfig.getPrimaryFields();
  var tableName = tableConfig.getTableName();

  var sql = SqlBuilderUtil.buildDeleteSql(tableName, FieldUtil.fieldToNames(primaryFields));

  return this.getSqlTemplate().updateRecord(sql, params, cb);
}</code></pre>
          <section id="batchAdd">
            <h1>batchAdd</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.batchAdd()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>objects</td>
                <td>Array</td>
                <td>O/R mapping objects</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport batchAdd O/R mapping objects.<br />objects are O/R mapping domain instances array<br />if primary field is single and its type is Long<br />you do not need set this field when batchAdd<br />bearcat-dao will generate this unique id for your objects</p>

<p>objects 是O/R mapping对应的domain对象实例数组 <br />如果主键是唯一的类型为Long的,通常情况下这个是一个自增的字段<br />这时batchAdd的domain对象可以不设置该字段的值<br />bearcat-dao 会为这些domain对象生成唯一的id值 </p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.batchAdd = function(objects, cb) {
  if (!objects || !objects.length) {
    return cb();
  }

  var tableConfig = this.getTableConfig();
  var primaryFields = tableConfig.getPrimaryFields();
  var tableName = tableConfig.getTableName();
  var fields = tableConfig.getFields(); // all fields, include primary fields

  var type = &quot;&quot;;
  var name = &quot;&quot;;
  var self = this;
  if (primaryFields.length === 1) {
    var primaryField = primaryFields[0];
    type = primaryField.getType();
    name = primaryField.getName();
    if (type === Constant.TYPE_LONG) {
      var len = objects.length;
      var latch = CountDownLatch.createCountDownLatch(len, function(err) {
        if (err) {
          return cb(err);
        }

        return self.doBatchAdd(objects, cb);
      });

      for (var i = 0; i &lt; objects.length; i++) {
        (function(object) {
          var id = object[name];
          if (!id) {
            self.getSqlTemplate().allocateRecordId(tableName, function(err, id) {
              if (err) {
                return cb(err);
              }

              object[name] = id;
              latch.done();
            });
          } else {
            latch.done();
          }
        })(objects[i]);
      }
    }
  } else {
    return self.doBatchAdd(objects, cb);
  }
}</code></pre>
          <section id="batchUpdate">
            <h1>batchUpdate</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.batchUpdate()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>objects</td>
                <td>Array</td>
                <td>O/R mapping objects</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport batchUpdate O/R mapping objects.<br />domain objects fields must be fullfilled when batchUpdate<br />a good practise is update what you get </p>

<p>当batchUpdate的时候，domain对象的所有属性必须都有值<br />一个好的实践就是更新你所查询的domain对象</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.batchUpdate = function(objects, cb) {
  if (!objects || !objects.length) {
    return cb();
  }

  var tableConfig = this.getTableConfig();
  var primaryFields = tableConfig.getPrimaryFields();
  var tableName = tableConfig.getTableName();
  var fields = tableConfig.getFields();

  if (primaryFields.length) {
    var parasList = [];

    for (var i = 0; i &lt; objects.length; i++) {
      var paras = [];
      for (var j = 0; j &lt; fields.length; j++) {
        var field = fields[j];
        var name = field.getName();
        paras.push(objects[i][name]);
      }
      parasList.push(paras);
    }

    var normalColumns = FieldUtil.fieldToNames(tableConfig.getNormalFields());
    var conditionColumns = FieldUtil.fieldToNames(primaryFields);
    var sql = SqlBuilderUtil.buildUpdateSql(tableConfig.getTableName(), normalColumns, conditionColumns);
    return this.getSqlTemplate().batchUpdateRecords(sql, parasList, function(err, results) {
      if (err) {
        return cb(err);
      }

      if (results) {
        cb(null, objects);
      } else {
        cb(null, null);
      }
    });
  } else {
    logger.error('can not batchUpdate object without primary key');
    return cb();
  }
}</code></pre>
          <section id="batchDelete">
            <h1>batchDelete</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.batchDelete()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>objects</td>
                <td>Array</td>
                <td>O/R mapping objects</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport batchDelete O/R mapping objects.<br />doamin objects primary fields must be fullfilled</p>

<p>domain 对象的主键字段对应的值必须要有</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.batchDelete = function(objects, cb) {
  if (!objects || !objects.length) {
    return cb();
  }

  var tableConfig = this.getTableConfig();
  var primaryFields = tableConfig.getPrimaryFields();
  var tableName = tableConfig.getTableName();
  var fields = tableConfig.getFields();

  if (primaryFields.length) {
    return this.batchDeleteByPrimaryKey(objects, cb);
  } else {
    logger.error('can not batchDelete object without primary key');
    return cb();
  }
}</code></pre>
          <section id="updateColumn">
            <h1>updateColumn</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.updateColumn()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>columnName</td>
                <td>String</td>
                <td>column name</td>
              </tr>
              <tr>
                <td>newValue</td>
                <td>String</td>
                <td>update value</td>
              </tr>
              <tr>
                <td>primarysValue</td>
                <td>Array</td>
                <td>primary fields values</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport updateColumn with newValue select by primary fields.</p>

<p>以主键作为查询条件来更新某个字段的值</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.updateColumn = function(columnName, newValue, primarysValue, cb) {
  if (!Array.isArray(primarysValue)) {
    logger.error('primarysValue must be array');
    return cb();
  }

  var tableConfig = this.getTableConfig();
  var primaryFields = tableConfig.getPrimaryFields();

  if (primaryFields.length) {
    if (primarysValue.length !== primaryFields.length) {
      logger.error(&quot;primarysValue's size must equal with the primarykey's size&quot;);
      return cb();
    }

    var params = primarysValue;
    var columns = FieldUtil.fieldToNames(primaryFields);

    return this.updateColumnValue(columnName, newValue, columns, params, cb);
  } else {
    logger.error('can not update object without primary key');
    return cb();
  }
}</code></pre>
          <section id="updateColumnValue">
            <h1>updateColumnValue</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.updateColumnValue()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>columnName</td>
                <td>String</td>
                <td>column name</td>
              </tr>
              <tr>
                <td>newValue</td>
                <td>String</td>
                <td>update value</td>
              </tr>
              <tr>
                <td>conditionColumns</td>
                <td>Array</td>
                <td>condition fields</td>
              </tr>
              <tr>
                <td>conditionValues</td>
                <td>Array</td>
                <td>condition fields values</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport updateColumnValue with newValue select by condition fields.</p>

<p>以查询条件字段作为查询条件来更新某个字段的值</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.updateColumnValue = function(columnName, newValue, conditionColumns, conditionValues, cb) {
  if (!Array.isArray(conditionColumns) || !Array.isArray(conditionValues)) {
    logger.error('conditionColumns or conditionValues must be array');
    return cb();
  }

  var tableConfig = this.getTableConfig();
  var params = [];
  params.push(newValue);

  for (var i = 0; i &lt; conditionValues.length; i++) {
    params.push(conditionValues[i]);
  }

  var updateColumns = [];
  updateColumns.push(columnName);
  var sql = SqlBuilderUtil.buildUpdateSql(tableConfig.getTableName(), updateColumns, conditionColumns);
  return this.getSqlTemplate().updateRecord(sql, params, cb);
}</code></pre>
          <section id="getList">
            <h1>getList</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.getList()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>sql</td>
                <td>String</td>
                <td>query sql</td>
              </tr>
              <tr>
                <td>params</td>
                <td>Array</td>
                <td>query values</td>
              </tr>
              <tr>
                <td>options</td>
                <td>Object</td>
                <td></td>
              </tr>
              <tr>
                <td>options.orderColumn</td>
                <td>String</td>
                <td>order column name</td>
              </tr>
              <tr>
                <td>options.isAsc</td>
                <td>Boolean</td>
                <td>sort asc ?</td>
              </tr>
              <tr>
                <td>options.limit</td>
                <td>Number</td>
                <td>limit number</td>
              </tr>
              <tr>
                <td>options.offset</td>
                <td>Number</td>
                <td>offset number</td>
              </tr>
              <tr>
                <td>options.domain</td>
                <td>Object</td>
                <td>domain configuration when doing multi table query</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport getList by sql, params.</p>

<p>select by sql, query params, and the result will be mapped to O/R mapping domain objects<br />in options you can pass to set order, limit, offset<br />when doing multi table query, you must pass domain to options, domain is what you define for your muti query O/R mapping domain</p>

<p>根据sql，params来进行查询，查询结果会O/R mapping到domain对象<br />在options里，你可以传入order,limit,offset<br />当要进行多表联合查询的时候，必须在options里传入domain，domain就是你想要进行多表联合查询所对应的O/R mapping对象</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.getList = function(sql, params, options, cb) {
  var tableConfig = this.getTableConfig();
  var fields = tableConfig.getFields();
  var func = tableConfig.getFunc();
  var self = this;

  options = options || {};
  var orderColumn = options.orderColumn;
  var isAsc = options.isAsc;
  var limit = options.limit;
  var offset = options.offset;
  var domain = options.domain;

  if (orderColumn) {
    sql = SqlBuilderUtil.appendOrder(sql, orderColumn, isAsc);
  }

  if (Utils.isNotNull(limit) &amp;&amp; Utils.isNotNull(offset)) {
    sql = SqlBuilderUtil.appendLimit(sql, limit, offset);
  }

  return this.getSqlTemplate().executeQuery(sql, params, function(err, results) {
    if (err) {
      return cb(err);
    }

    var beanObjects = null;
    if (domain) {
      var domainConfig = self.getConfig(domain);
      beanObjects = BeanBuilderUtil.buildObjectList(results, domainConfig.getFunc(), domainConfig.getFields());
    } else {
      beanObjects = BeanBuilderUtil.buildObjectList(results, func, fields);
    }

    cb(null, beanObjects);
  });
}</code></pre>
          <section id="getByPrimary">
            <h1>getByPrimary</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.getByPrimary()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>params</td>
                <td>Array</td>
                <td>query values</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport getList by primary fields params.<br />params fields must be corresponded to what your domain defines primary fields</p>

<p>params 参数的顺序必须和domain里面主键定义的顺序相对应<br />根据主键来进行查询列表</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.getByPrimary = function(params, cb) {
  var tableConfig = this.getTableConfig();
  var primaryFields = tableConfig.getPrimaryFields();
  var func = tableConfig.getFunc();

  if (params.length !== primaryFields.length) {
    logger.error('parameter size must be equal with the primary fields size');
    return cb();
  }

  var fields = FieldUtil.fieldToNames(tableConfig.getFields());
  var primaryFields = FieldUtil.fieldToNames(tableConfig.getPrimaryFields());
  var sql = SqlBuilderUtil.buildSelectSql(tableConfig.getTableName(), fields, primaryFields);

  return this.getSqlTemplate().executeQuery(sql, params, function(err, results) {
    if (err) {
      return cb(err);
    }

    var beanObjects = BeanBuilderUtil.buildObjectList(results, func, tableConfig.getFields());
    cb(null, beanObjects);
  });
}</code></pre>
          <section id="getById">
            <h1>getById</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.getById()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>id</td>
                <td>Long</td>
                <td></td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport getList by id.<br />id must be the unique primary key </p>

<p>id 必须是唯一主键</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.getById = function(id, cb) {
  var params = [id];

  return this.getByPrimary(params, cb);
}</code></pre>
          <section id="get">
            <h1>get</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.get()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>sql</td>
                <td>String</td>
                <td>query sql</td>
              </tr>
              <tr>
                <td>params</td>
                <td>Array</td>
                <td>query values</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport getList by sql, params.</p>

<p>select by sql, query params, and the result will be mapped to O/R mapping domain objects</p>

<p>根据sql，params来进行查询，查询结果会O/R mapping到domain对象</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.get = function(sql, params, cb) {
  var tableConfig = this.getTableConfig();
  var func = tableConfig.getFunc();

  return this.getSqlTemplate().executeQuery(sql, params, function(err, results) {
    if (err) {
      return cb(err);
    }

    var beanObjects = BeanBuilderUtil.buildObjectList(results, func, tableConfig.getFields());
    cb(null, beanObjects);
  });
}</code></pre>
          <section id="getCount">
            <h1>getCount</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.getCount()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>sql</td>
                <td>String</td>
                <td>query sql</td>
              </tr>
              <tr>
                <td>params</td>
                <td>Array</td>
                <td>query values</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport getCount by sql, params.</p>

<p>select count by sql, query params</p>

<p>根据sql，params来查询数量</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.getCount = function(sql, params, cb) {
  return this.getSqlTemplate().queryCount(sql, params, cb);
}</code></pre>
          <section id="add">
            <h1>add</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.add()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>sql</td>
                <td>String</td>
                <td>query sql</td>
              </tr>
              <tr>
                <td>params</td>
                <td>Array</td>
                <td>query values</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
              <tr>
                <td>objects</td>
                <td>Object</td>
                <td>O/R mapping object</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function </td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport add by sql, params or by O/R mapping object.</p>

<p>通过sql，params来添加数据 或者 通过 O/R mapping 的 domain object 对象来添加数据</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.add = function(sql, params, cb) {
  if (Utils.checkObject(sql) &amp;&amp; Utils.checkFunction(params)) {
    return this.batchAdd([sql], params);
  }

  return this.getSqlTemplate().addRecord(sql, params, cb);
}</code></pre>
          <section id="delete">
            <h1>delete</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.delete()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>sql</td>
                <td>String</td>
                <td>query sql</td>
              </tr>
              <tr>
                <td>params</td>
                <td>Array</td>
                <td>query values</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
              <tr>
                <td>objects</td>
                <td>Object</td>
                <td>O/R mapping object</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport delete by sql, params or by O/R mapping object.</p>

<p>通过sql，params来删除数据 或者 通过 O/R mapping 的 domain object 对象来删除数据</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.delete = function(sql, params, cb) {
  if (Utils.checkObject(sql) &amp;&amp; Utils.checkFunction(params)) {
    return this.batchDelete([sql], params);
  }

  return this.getSqlTemplate().updateRecord(sql, params, cb);
}</code></pre>
          <section id="update">
            <h1>update</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.update()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>sql</td>
                <td>String</td>
                <td>query sql</td>
              </tr>
              <tr>
                <td>params</td>
                <td>Array</td>
                <td>query values</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
              <tr>
                <td>objects</td>
                <td>Object</td>
                <td>O/R mapping object</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport update by sql, params or by O/R mapping object.</p>

<p>通过sql，params来更新数据 或者 通过 O/R mapping 的 domain object 对象来更新数据</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.update = function(sql, params, cb) {
  if (Utils.checkObject(sql) &amp;&amp; Utils.checkFunction(params)) {
    return this.batchUpdate([sql], params);
  }

  return this.getSqlTemplate().updateRecord(sql, params, cb);
}</code></pre>
          <section id="exists">
            <h1>exists</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.exists()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>sql</td>
                <td>String</td>
                <td>query sql</td>
              </tr>
              <tr>
                <td>params</td>
                <td>Array</td>
                <td>query values</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport exists by sql, params.<br />if exist, result will true, otherwise result will false</p>

<p>如果存在，cb结果是true，否则是false</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.exists = function(sql, params, cb) {
  return this.getSqlTemplate().existRecord(sql, params, cb);
}</code></pre>
          <section id="allocateRecordId">
            <h1>allocateRecordId</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.allocateRecordId()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>tableName</td>
                <td>String</td>
                <td>table name</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport allocate recordId for table.</p>

<p>为表申请主键id的值</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.allocateRecordId = function(tableName, cb) {
  return this.getSqlTemplate().allocateRecordId(tableName, cb);
}

var SQL_SELECT = &quot;SELECT * FROM %s WHERE %s &quot;;

var SQL_COUNT_SELECT = &quot;SELECT count(*) num FROM %s WHERE %s &quot;;

var SQL_OBJECT_SELECT = &quot;SELECT * FROM %s WHERE %s &quot;;

var REMOVE_OBJECT_SELECT = &quot;DELETE FROM %s WHERE %s &quot;;</code></pre>
          <section id="getByWhere">
            <h1>getByWhere</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.getByWhere()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>where</td>
                <td>String</td>
                <td>where sql</td>
              </tr>
              <tr>
                <td>args</td>
                <td>Array</td>
                <td>query params</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport getList by where.</p>

<p>select by where sql, query params, and the result will be mapped to O/R mapping domain objects</p>

<p>根据where查询sql，params来进行查询，查询结果会O/R mapping到domain对象</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.getByWhere = function(where, args, cb) {
  var tableConfig = this.getTableConfig();

  var sql = util.format(SQL_OBJECT_SELECT, tableConfig.getTableName(), where);

  return this.get(sql, args, cb);
}</code></pre>
          <section id="getListByWhere">
            <h1>getListByWhere</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.getListByWhere()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>where</td>
                <td>String</td>
                <td>where sql</td>
              </tr>
              <tr>
                <td>args</td>
                <td>Array</td>
                <td>query params</td>
              </tr>
              <tr>
                <td>options</td>
                <td>Object</td>
                <td></td>
              </tr>
              <tr>
                <td>options.orderColumn</td>
                <td>String</td>
                <td>order column name</td>
              </tr>
              <tr>
                <td>options.isAsc</td>
                <td>Boolean</td>
                <td>sort asc ?</td>
              </tr>
              <tr>
                <td>options.limit</td>
                <td>Number</td>
                <td>limit number</td>
              </tr>
              <tr>
                <td>options.offset</td>
                <td>Number</td>
                <td>offset number</td>
              </tr>
              <tr>
                <td>options.domain</td>
                <td>Object</td>
                <td>domain configuration when doing multi table query</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport getList by where.</p>

<p>select by where sql, query params, and the result will be mapped to O/R mapping domain objects<br />in options you can pass to set order, limit, offset<br />when doing multi table query, you must pass domain to options, domain is what you define for your muti query O/R mapping domain</p>

<p>根据where查询sql，params来进行查询，查询结果会O/R mapping到domain对象<br />在options里，你可以传入order,limit,offset<br />当要进行多表联合查询的时候，必须在options里传入domain，domain就是你想要进行多表联合查询所对应的O/R mapping对象</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.getListByWhere = function(where, args, options, cb) {
  var tableConfig = this.getTableConfig();

  var sql = util.format(SQL_SELECT, tableConfig.getTableName(), where);

  options = options || {};
  var orderColumn = options.orderColumn;
  var isAsc = options.isAsc;
  var limit = options.limit;
  var offset = options.offset;
  var domain = options.domain;

  var opt = {};

  if (orderColumn) {
    sql = SqlBuilderUtil.appendOrder(sql, orderColumn, isAsc);
  }

  if (Utils.isNotNull(limit) &amp;&amp; Utils.isNotNull(offset)) {
    sql = SqlBuilderUtil.appendLimit(sql, limit, offset);
  }

  if (domain) {
    opt['domain'] = domain;
  }

  return this.getList(sql, args, opt, cb);
}</code></pre>
          <section id="getCountByWhere">
            <h1>getCountByWhere</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.getCountByWhere()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>where</td>
                <td>String</td>
                <td>where sql</td>
              </tr>
              <tr>
                <td>args</td>
                <td>Array</td>
                <td>query params</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport getCount by where.</p>

<p>select count by where sql, query params</p>

<p>根据where查询sql，params来查询数量</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.getCountByWhere = function(where, args, cb) {
  var tableConfig = this.getTableConfig();

  var sql = util.format(SQL_COUNT_SELECT, tableConfig.getTableName(), where);

  return this.getCount(sql, args, cb);
}</code></pre>
          <section id="removeByWhere">
            <h1>removeByWhere</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.removeByWhere()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>where</td>
                <td>String</td>
                <td>where sql</td>
              </tr>
              <tr>
                <td>args</td>
                <td>Array</td>
                <td>query params</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport remove by where.</p>

<p>remove by where sql, query params</p>

<p>根据where查询sql，params来进行删除</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.removeByWhere = function(where, args, cb) {
  var tableConfig = this.getTableConfig();

  var sql = util.format(REMOVE_OBJECT_SELECT, tableConfig.getTableName(), where);

  return this.delete(sql, args, cb);
}</code></pre>
          <section id="addToCache">
            <h1>addToCache</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.addToCache()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>key</td>
                <td>String</td>
                <td>cache key</td>
              </tr>
              <tr>
                <td>value</td>
                <td>String</td>
                <td>cache value</td>
              </tr>
              <tr>
                <td>expire</td>
                <td>Number</td>
                <td>expire time</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport add to cache.</p>

<p>add key:value cache, if pass expire, it will set expire time in seconds</p>

<p>添加key:value缓存,如果传了expire，则会设置expire的过期时间, expire单位为秒</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.addToCache = function(key, value, expire) {
  return this.getCacheTemplate().addToCache(key, value, expire);
}</code></pre>
          <section id="getStringFromCache">
            <h1>getStringFromCache</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.getStringFromCache()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>key</td>
                <td>String</td>
                <td>cache key</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport get from cache.</p>

<p>通过key来查询string value</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.getStringFromCache = function(key, cb) {
  return this.getCacheTemplate().getString(key, cb);
}</code></pre>
          <section id="setCounter">
            <h1>setCounter</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.setCounter()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>key</td>
                <td>String</td>
                <td>cache key</td>
              </tr>
              <tr>
                <td>initCount</td>
                <td>Number</td>
                <td>init count number</td>
              </tr>
              <tr>
                <td>expire</td>
                <td>Number</td>
                <td>expire time</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport set counter to cache.</p>

<p>set counter with initCount, if pass expire, it will set expire time in seconds</p>

<p>设置一个计数器，初始值为InitCount, 如果传了expire，则会设置expire的过期时间, expire单位为秒</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.setCounter = function(key, initCount, expire) {
  return this.getCacheTemplate().setCounter(key, initCount, expire);
}</code></pre>
          <section id="getCounter">
            <h1>getCounter</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.getCounter()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>key</td>
                <td>String</td>
                <td>cache key</td>
              </tr>
              <tr>
                <td>cb</td>
                <td>Function</td>
                <td>callback function</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport get counter from cache.</p>

<p>查询key对应的计数器的值</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.getCounter = function(key, cb) {
  return this.getCacheTemplate().getCounter(key, cb);
}</code></pre>
          <section id="incr">
            <h1>incr</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.incr()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>key</td>
                <td>String</td>
                <td>cache key</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport incr counter by 1.</p>

<p>计数器增加值1 </p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.incr = function(key) {
  return this.getCacheTemplate().incr(key)
}</code></pre>
          <section id="incrBy">
            <h1>incrBy</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.incrBy()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>key</td>
                <td>String</td>
                <td>cache key</td>
              </tr>
              <tr>
                <td>increment</td>
                <td>Number</td>
                <td>increment number</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport incr counter by increment.</p>

<p>计数器增加值increment </p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.incrBy = function(key, increment) {
  return this.getCacheTemplate().incrBy(key, increment);
}</code></pre>
          <section id="removeFromCache">
            <h1>removeFromCache</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>DomainDaoSupport.prototype.removeFromCache()</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>key</td>
                <td>String</td>
                <td>cache key</td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p>DomainDaoSupport remove from cache.</p>

<p>从cache删除key对应的值</p> </div>
          <pre><code class="language-javascript">DomainDaoSupport.prototype.removeFromCache = function(key) {
  return this.getCacheTemplate().delFromCache(key);
}</code></pre>
        </div>
      </div>
    </div>
    <footer class="footer">
      <div class="container">
        <p>Documentation generated with<a href="https://github.com/FGRibreau/doxx">Doxx</a>created by<a href="https://twitter.com/FGRibreau" data-show-count="false" class="twitter-follow-button">Francois-Guillaume Ribreau</a></p>
        <p>Doxx is sponsored by<a href="http://bringr.net/?btt" title="Outil d'analyse des réseaux sociaux" class="bringr">Bringr</a>and<a href="https://redsmin.com/?btt" title="Full Redis GUI" class="redsmin">Redsmin</a></p>
        <p>Theme borrowed from Twitter Bootstrap</p>
      </div>
    </footer>
    <script src="javascripts/widgets.js"></script>
    <script src="javascripts/jquery.min.js"></script>
    <script src="javascripts/prefixfree.js"></script>
    <script src="javascripts/bootstrap-transition.js"></script>
    <script src="javascripts/bootstrap-scrollspy.js"></script>
    <script src="javascripts/bootstrap-dropdown.js"></script>
    <script src="javascripts/bootstrap-collapse.js"></script>
    <script src="javascripts/bootstrap-affix.js"></script>
    <script>
      /**
       * Prism: Lightweight, robust, elegant syntax highlighting
       * MIT license http://www.opensource.org/licenses/mit-license.php/
       * @author Lea Verou http://lea.verou.me
       */(function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=self.Prism={util:{type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var n=t.util.type(e);switch(n){case"Object":var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=t.util.clone(e[i]));return r;case"Array":return e.slice()}return e}},languages:{extend:function(e,n){var r=t.util.clone(t.languages[e]);for(var i in n)r[i]=n[i];return r},insertBefore:function(e,n,r,i){i=i||t.languages;var s=i[e],o={};for(var u in s)if(s.hasOwnProperty(u)){if(u==n)for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);o[u]=s[u]}return i[e]=o},DFS:function(e,n){for(var r in e){n.call(e,r,e[r]);t.util.type(e)==="Object"&&t.languages.DFS(e[r],n)}}},highlightAll:function(e,n){var r=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code');for(var i=0,s;s=r[i++];)t.highlightElement(s,e===!0,n)},highlightElement:function(r,i,s){var o,u,a=r;while(a&&!e.test(a.className))a=a.parentNode;if(a){o=(a.className.match(e)||[,""])[1];u=t.languages[o]}if(!u)return;r.className=r.className.replace(e,"").replace(/\s+/g," ")+" language-"+o;a=r.parentNode;/pre/i.test(a.nodeName)&&(a.className=a.className.replace(e,"").replace(/\s+/g," ")+" language-"+o);var f=r.textContent;if(!f)return;f=f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00a0/g," ");var l={element:r,language:o,grammar:u,code:f};t.hooks.run("before-highlight",l);if(i&&self.Worker){var c=new Worker(t.filename);c.onmessage=function(e){l.highlightedCode=n.stringify(JSON.parse(e.data));l.element.innerHTML=l.highlightedCode;s&&s.call(l.element);t.hooks.run("after-highlight",l)};c.postMessage(JSON.stringify({language:l.language,code:l.code}))}else{l.highlightedCode=t.highlight(l.code,l.grammar);l.element.innerHTML=l.highlightedCode;s&&s.call(r);t.hooks.run("after-highlight",l)}},highlight:function(e,r){return n.stringify(t.tokenize(e,r))},tokenize:function(e,n){var r=t.Token,i=[e],s=n.rest;if(s){for(var o in s)n[o]=s[o];delete n.rest}e:for(var o in n){if(!n.hasOwnProperty(o)||!n[o])continue;var u=n[o],a=u.inside,f=!!u.lookbehind||0;u=u.pattern||u;for(var l=0;l<i.length;l++){var c=i[l];if(i.length>e.length)break e;if(c instanceof r)continue;u.lastIndex=0;var h=u.exec(c);if(h){f&&(f=h[1].length);var p=h.index-1+f,h=h[0].slice(f),d=h.length,v=p+d,m=c.slice(0,p+1),g=c.slice(v+1),y=[l,1];m&&y.push(m);var b=new r(o,a?t.tokenize(h,a):h);y.push(b);g&&y.push(g);Array.prototype.splice.apply(i,y)}}}return i},hooks:{all:{},add:function(e,n){var r=t.hooks.all;r[e]=r[e]||[];r[e].push(n)},run:function(e,n){var r=t.hooks.all[e];if(!r||!r.length)return;for(var i=0,s;s=r[i++];)s(n)}}},n=t.Token=function(e,t){this.type=e;this.content=t};n.stringify=function(e){if(typeof e=="string")return e;if(Object.prototype.toString.call(e)=="[object Array]"){for(var r=0;r<e.length;r++)e[r]=n.stringify(e[r]);return e.join("")}var i={type:e.type,content:n.stringify(e.content),tag:"span",classes:["token",e.type],attributes:{}};i.type=="comment"&&(i.attributes.spellcheck="true");t.hooks.run("wrap",i);var s="";for(var o in i.attributes)s+=o+'="'+(i.attributes[o]||"")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'" '+s+">"+i.content+"</"+i.tag+">"};if(!self.document){self.addEventListener("message",function(e){var n=JSON.parse(e.data),r=n.language,i=n.code;self.postMessage(JSON.stringify(t.tokenize(i,t.languages[r])));self.close()},!1);return}var r=document.getElementsByTagName("script");r=r[r.length-1];if(r){t.filename=r.src;document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",t.highlightAll)}})();;
      Prism.languages.markup={comment:/&lt;!--[\w\W]*?--(&gt;|&gt;)/g,prolog:/&lt;\?.+?\?&gt;/,doctype:/&lt;!DOCTYPE.+?&gt;/,cdata:/&lt;!\[CDATA\[[\w\W]+?]]&gt;/i,tag:{pattern:/&lt;\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|\w+))?\s*)*\/?&gt;/gi,inside:{tag:{pattern:/^&lt;\/?[\w:-]+/i,inside:{punctuation:/^&lt;\/?/,namespace:/^[\w-]+?:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,inside:{punctuation:/=|&gt;|"/g}},punctuation:/\/?&gt;/g,"attr-name":{pattern:/[\w:-]+/g,inside:{namespace:/^[\w-]+?:/}}}},entity:/&amp;#?[\da-z]{1,8};/gi};Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});;
      Prism.languages.css={comment:/\/\*[\w\W]*?\*\//g,atrule:/@[\w-]+?(\s+[^;{]+)?(?=\s*{|\s*;)/gi,url:/url\((["']?).*?\1\)/gi,selector:/[^\{\}\s][^\{\}]*(?=\s*\{)/g,property:/(\b|\B)[a-z-]+(?=\s*:)/ig,string:/("|')(\\?.)*?\1/g,important:/\B!important\b/gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[\{\};:]/g};Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{style:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/style(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)|(&lt;|<)\/style(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css}}});;
      Prism.languages.clike={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|\/\/.*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,number:/\b-?(0x)?\d*\.?[\da-f]+\b/g,operator:/[-+]{1,2}|!|=?&lt;|=?&gt;|={1,2}|(&amp;){1,2}|\|?\||\?|\*|\//g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g};;
      Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(var|let|if|else|while|do|for|return|in|instanceof|function|new|with|typeof|try|catch|finally|null|break|continue)\b/g,number:/\b(-?(0x)?\d*\.?[\da-f]+|NaN|-?Infinity)\b/g});Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}});Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/script(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)|(&lt;|<)\/script(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}});;
      
    </script>
    <!-- App js-->
    <script>
      $(function(){
        var $window = $(window);
        $('.scrollspy .nav').affix({
          offset: {
            top: function () { return $window.width() <= 980 ? 480 : 400 }
          , bottom: 50
          }
        });
      })
    </script>
  </body>
</html>